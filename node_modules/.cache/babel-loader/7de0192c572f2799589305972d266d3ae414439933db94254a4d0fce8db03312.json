{"ast":null,"code":"var _jsxFileName = \"/Users/bandurabohdan/Downloads/test_formula/src/components/FormulaInput.tsx\",\n  _s = $RefreshSig$();\nimport { useState, useRef } from \"react\";\nimport useStore from \"../store/store\";\nimport { useAutocompleteSuggestions } from \"../store/useAutocompleteSuggestions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FormulaInput = () => {\n  _s();\n  const [inputValue, setInputValue] = useState(\"\");\n  const {\n    data: suggestions = [],\n    isLoading\n  } = useAutocompleteSuggestions(inputValue);\n  const addTag = useStore(state => state.addTag);\n  const removeTag = useStore(state => state.removeTag);\n  const tags = useStore(state => state.tags);\n  const inputRef = useRef(null);\n  const handleSelectSuggestion = suggestion => {\n    addTag(suggestion);\n    setInputValue(\"\");\n    if (inputRef.current) {\n      inputRef.current.innerText = \"\";\n      inputRef.current.focus();\n    }\n  };\n  const handleKeyDown = e => {\n    var _inputRef$current;\n    if (e.key === \"Backspace\" && !((_inputRef$current = inputRef.current) !== null && _inputRef$current !== void 0 && _inputRef$current.innerText)) {\n      removeTag(tags.length - 1);\n    }\n  };\n  const updateInputValue = e => {\n    const target = e.target;\n    setInputValue(target.innerText);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border border-gray-300 p-1 flex items-center flex-wrap min-h-[38px]\",\n      onClick: () => {\n        var _inputRef$current2;\n        return (_inputRef$current2 = inputRef.current) === null || _inputRef$current2 === void 0 ? void 0 : _inputRef$current2.focus();\n      },\n      children: [tags.map((tag, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2 bg-gray-200 m-1 p-3 rounded-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: tag.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => removeTag(index),\n          className: \"cursor-pointer bg-transparent border-none text-1.2rem\",\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 13\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: inputRef,\n        contentEditable: true,\n        onInput: updateInputValue,\n        onKeyDown: handleKeyDown,\n        className: \"outline-none min-w-[60px] flex-grow\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this), isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 20\n    }, this) : null, suggestions.length > 0 && /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"absolute z-10 bg-white w-full p-2 flex flex-wrap border border-gray-300 mt-0.5\",\n      children: suggestions.map(suggestion => /*#__PURE__*/_jsxDEV(\"li\", {\n        onClick: () => handleSelectSuggestion(suggestion),\n        className: \"cursor-pointer p-2 hover:bg-gray-100 border m-2\",\n        children: suggestion.name\n      }, suggestion.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 5\n  }, this);\n};\n_s(FormulaInput, \"HAFUcg0DRo8TT0CVhcbiBOTkKeM=\", false, function () {\n  return [useAutocompleteSuggestions, useStore, useStore, useStore];\n});\n_c = FormulaInput;\nexport default FormulaInput;\nvar _c;\n$RefreshReg$(_c, \"FormulaInput\");","map":{"version":3,"names":["useState","useRef","useStore","useAutocompleteSuggestions","jsxDEV","_jsxDEV","FormulaInput","_s","inputValue","setInputValue","data","suggestions","isLoading","addTag","state","removeTag","tags","inputRef","handleSelectSuggestion","suggestion","current","innerText","focus","handleKeyDown","e","_inputRef$current","key","length","updateInputValue","target","className","children","onClick","_inputRef$current2","map","tag","index","name","fileName","_jsxFileName","lineNumber","columnNumber","ref","contentEditable","onInput","onKeyDown","id","_c","$RefreshReg$"],"sources":["/Users/bandurabohdan/Downloads/test_formula/src/components/FormulaInput.tsx"],"sourcesContent":["import { useState, useRef, FC } from \"react\";\nimport useStore from \"../store/store\";\nimport { useAutocompleteSuggestions } from \"../store/useAutocompleteSuggestions\";\nimport { TagType } from \"../store/store\";\n\nconst FormulaInput: FC = () => {\n  const [inputValue, setInputValue] = useState(\"\");\n  const { data: suggestions = [], isLoading } =\n    useAutocompleteSuggestions(inputValue);\n  const addTag = useStore((state) => state.addTag);\n  const removeTag = useStore((state) => state.removeTag);\n  const tags = useStore((state) => state.tags);\n  const inputRef = useRef<HTMLDivElement>(null);\n\n  const handleSelectSuggestion = (suggestion: TagType): void => {\n    addTag(suggestion);\n    setInputValue(\"\");\n    if (inputRef.current) {\n      inputRef.current.innerText = \"\";\n      inputRef.current.focus();\n    }\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLDivElement>): void => {\n    if (e.key === \"Backspace\" && !inputRef.current?.innerText) {\n      removeTag(tags.length - 1);\n    }\n  };\n\n  const updateInputValue = (e: React.FormEvent<HTMLDivElement>): void => {\n    const target = e.target as HTMLDivElement;\n    setInputValue(target.innerText);\n  };\n\n  return (\n    <div className=\"relative\">\n      <div\n        className=\"border border-gray-300 p-1 flex items-center flex-wrap min-h-[38px]\"\n        onClick={() => inputRef.current?.focus()}\n      >\n        {tags.map((tag, index) => (\n          <div\n            key={index}\n            className=\"flex items-center gap-2 bg-gray-200 m-1 p-3 rounded-full\"\n          >\n            <span>{tag.name}</span>\n            <button\n              onClick={() => removeTag(index)}\n              className=\"cursor-pointer bg-transparent border-none text-1.2rem\"\n            >\n              &times;\n            </button>\n          </div>\n        ))}\n        <div\n          ref={inputRef}\n          contentEditable\n          onInput={updateInputValue}\n          onKeyDown={handleKeyDown}\n          className=\"outline-none min-w-[60px] flex-grow\"\n        />\n      </div>\n      {isLoading ? <div>Loading...</div> : null}\n      {suggestions.length > 0 && (\n        <ul className=\"absolute z-10 bg-white w-full p-2 flex flex-wrap border border-gray-300 mt-0.5\">\n          {suggestions.map((suggestion) => (\n            <li\n              key={suggestion.id}\n              onClick={() => handleSelectSuggestion(suggestion)}\n              className=\"cursor-pointer p-2 hover:bg-gray-100 border m-2\"\n            >\n              {suggestion.name}\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n};\n\nexport default FormulaInput;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}